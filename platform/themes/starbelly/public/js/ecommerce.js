(()=>{"use strict";var e=function(e){void 0!==e.errors&&e.errors.length?t(e.errors):void 0!==e.responseJSON?void 0!==e.responseJSON.errors?422===e.status&&t(e.responseJSON.errors):void 0!==e.responseJSON.message?a(e.responseJSON.message):$.each(e.responseJSON,(function(e,t){$.each(t,(function(e,t){a(t)}))})):a(e.statusText)},t=function(e){var t="";$.each(e,(function(e,a){""!==t&&(t+="<br />"),t+=a})),a(t)},a=function(e){r("alert-danger",e)},n=function(e){r("alert-success",e)},r=function(e,t){if(e&&""!==t){var a=$("#live-toast"),n=new bootstrap.Toast(a[0]);a.removeClass((function(e,t){return(t.match(/(^|\s)alert-\S+/g)||[]).join(" ")})),a.find(".toast-body").html(t),a.addClass(e),n.show()}};$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var o=o||{};window.Ecommerce=o,function(t){var r=t("#loading");o.$body=t(document.body),o.$formSearch=t("#products-filter-form"),o.productListing=".products-listing",o.$productListing=t(o.productListing);var i=!0;o.init=function(){this.addProductToCart(),this.addProductToWishlist(),this.addProductToCompare(),this.submitReviewProduct(),this.customerDashboard(),this.removeCartItem(),this.loadAjaxCart(),this.productQuantity(),this.applyCouponCode(),this.filterSlider(),this.productsFilter(),this.removeCompareItem(),this.removeWishlistItem();var e=t("#sb-rating-bar");e.length&&e.barrating({initialRating:5,theme:"css-stars"}),t(document).ready((function(){var e=t("#flash-sale-modal");e.length&&!function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}(e.data("id"))&&setTimeout((function(){e.addClass("sb-active"),function(e,t,a){var n=new Date,r=window.siteUrl;r.includes(window.location.protocol)||(r=window.location.protocol+r);var o=new URL(r);n.setTime(n.getTime()+24*a*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+i+"; path=/; domain="+o.hostname}(e.data("id"),1,1)}),5e3),t(".sb-close-popup , .sb-ppc").on("click",(function(){t(".sb-popup-frame").removeClass("sb-active")}))})),window.onBeforeChangeSwatches=function(e,t){var a=t.closest(".product-details"),n=a.find(".cart-form");a.find(".error-message").hide(),a.find(".success-message").hide(),a.find(".number-items-available").html("").hide();var r=n.find("button[type=submit]");r.addClass("button-loading"),e&&e.attributes&&r.prop("disabled",!0)},window.onChangeSwatchesSuccess=function(e,a){var n=a.closest(".product-details"),r=n.find(".cart-form"),o=t(".footer-cart-form");if(n.find(".error-message").hide(),n.find(".success-message").hide(),e){var i=r.find("button[type=submit]");if(i.removeClass("button-loading"),e.error)i.prop("disabled",!0),n.find(".number-items-available").html('<span class="text-danger">('+e.message+")</span>").show(),r.find(".hidden-product-id").val(""),o.find(".hidden-product-id").val("");else{var s=e.data,c=n.find(".box-price"),d=c.find(".price"),l=c.find(".price-old");s.sale_price!==s.price?l.removeClass("d-none"):l.addClass("d-none"),d.text(s.display_sale_price),l.text(s.display_price),s.sku?(n.find(".meta-sku .meta-value").text(s.sku),n.find(".meta-sku").removeClass("d-none")):n.find(".meta-sku").addClass("d-none"),r.find(".hidden-product-id").val(s.id),o.find(".hidden-product-id").val(s.id),i.prop("disabled",!1),s.error_message?(i.prop("disabled",!0),n.find(".number-items-available").html('<span class="text-danger">('+s.error_message+")</span>").show()):s.success_message?n.find(".number-items-available").html(e.data.stock_status_html).show():n.find(".number-items-available").html("").hide();var u=s.unavailable_attribute_ids||[];n.find(".attribute-swatch-item").removeClass("pe-none"),n.find(".product-filter-item option").prop("disabled",!1),u&&u.length&&u.map((function(e){var t=n.find('.attribute-swatch-item[data-id="'+e+'"]');t.length?(t.addClass("pe-none"),t.find("input").prop("checked",!1)):(t=n.find('.product-filter-item option[data-id="'+e+'"]')).length&&t.prop("disabled","disabled").prop("selected",!1)}))}}}},o.customerDashboard=function(){t.fn.datepicker&&t("#date_of_birth").datepicker({format:"yyyy-mm-dd",orientation:"bottom"}),t("#avatar").on("change",(function(e){var a=e.currentTarget;if(a.files&&a.files[0]){var n=new FileReader;n.onload=function(e){t(".userpic-avatar").attr("src",e.target.result)},n.readAsDataURL(a.files[0])}})),t(document).on("click",".btn-trigger-delete-address",(function(e){e.preventDefault(),t(".btn-confirm-delete").data("url",t(this).data("url")),t("#confirm-delete-modal").modal("show")})),t(document).on("click",".btn-confirm-delete",(function(r){r.preventDefault();var o=t(this);t.ajax({url:o.data("url"),type:"GET",beforeSend:function(){o.addClass("loading")},success:function(e){o.closest(".modal").modal("hide"),e.error?a(e.message):(n(e.message),t('.btn-trigger-delete-address[data-url="'+o.data("url")+'"]').closest(".col-md-6").remove())},error:function(t){e(t)},complete:function(){o.removeClass("loading")}})}))},o.addProductToWishlist=function(){o.$body.on("click",".product-wishlist-button",(function(e){e.preventDefault();var r=t(e.currentTarget);t.ajax({url:r.data("url"),method:"POST",beforeSend:function(){r.addClass("button-loading")},success:function(e){var o;if(e.error)return a(e.message),!1;n(e.message),t(".btn-wishlist .header-item-counter").text(e.data.count),n(e.message),t(".sb-btn-wishlist").find(".sb-wishlist-number").length?t(".sb-top-bar-frame").find(".sb-wishlist-number").text(e.data.count):t(".sb-btn-wishlist").load(window.siteUrl+" .sb-btn-wishlist > *",(function(){})),null!==(o=e.data)&&void 0!==o&&o.added?t('.wishlist-button .wishlist[data-url="'+r.data("url")+'"]').addClass("added-to-wishlist"):t('.wishlist-button .wishlist[data-url="'+r.data("url")+'"]').removeClass("added-to-wishlist")},error:function(e){a(e.message)},complete:function(){r.removeClass("button-loading")}})}))},o.addProductToCompare=function(){o.$body.on("click",".product-compare-button",(function(e){e.preventDefault();var r=t(e.currentTarget);t.ajax({url:r.data("url"),method:"POST",beforeSend:function(){r.addClass("button-loading")},success:function(e){if(e.error)return a(e.message),!1;n(e.message),t(".header-top .compare-counter").text(e.data.count)},error:function(e){a(e.message)},complete:function(){r.removeClass("button-loading")}})}))},o.addProductToCart=function(){o.$body.on("click","form.cart-form button[type=submit]",(function(r){r.preventDefault();var i=t(this).closest("form.cart-form"),s=t(this);s.find(".sb-icon img").hide(),s.find(".sb-icon i").show(),t.ajax({type:"POST",url:i.prop("action"),data:i.serialize(),success:function(e){e.error?a(e.message):(n(e.message),o.loadAjaxCart(s),"checkout"===s.prop("name")&&void 0!==e.data.next_url&&(window.location.href=e.data.next_url))},error:function(t){e(t)},complete:function(){s.find(".sb-icon img").show(),s.find(".sb-icon i").hide()}})}))},o.removeCompareItem=function(){t(document).on("click",".remove-compare-item",(function(e){e.preventDefault();var o=t(this);t.ajax({url:o.data("url"),method:"POST",data:{_method:"DELETE"},beforeSend:function(){r.show()},success:function(e){e.error?a(e.message):(n(e.message),t(".header-top .compare-counter").text(e.data.count),t(".compare-page-content").load(window.location.href+" .compare-page-content > *"))},error:function(e){a(e.message)},complete:function(){r.hide()}})}))},o.submitReviewProduct=function(){var i=[],s=function(e){for(var t=new ClipboardEvent("").clipboardData||new DataTransfer,a=0,n=i;a<n.length;a++){var r=n[a];t.items.add(r)}e.files=t.files,c(e)},c=function(e){var a=t(".image-upload__text"),n=t(e).data("max-files"),r=e.files.length;n?(r>=n?a.closest(".image-upload__uploader-container").addClass("d-none"):a.closest(".image-upload__uploader-container").removeClass("d-none"),a.text(r+"/"+n)):a.text(r);var o=t(".image-viewer__list"),i=t("#review-image-template").html();if(o.addClass("is-loading"),o.find(".image-viewer__item").remove(),r){for(var s=r-1;s>=0;s--)o.prepend(i.replace("__id__",s));for(var c=function(t){var a=new FileReader;a.onload=function(e){o.find(".image-viewer__item[data-id="+t+"]").find("img").attr("src",e.target.result)},a.readAsDataURL(e.files[t])},d=r-1;d>=0;d--)c(d)}o.removeClass("is-loading")};t(document).on("change",".form-review-product input[type=file]",(function(e){e.preventDefault();var n=this,r=t(n),o=r.data("max-size");Object.keys(n.files).map((function(e){if(o&&n.files[e].size/1024>o){var t=r.data("max-size-message").replace("__attribute__",n.files[e].name).replace("__max__",o);a(t)}else i.push(n.files[e])}));var c=i.length,d=r.data("max-files");d&&c>d&&i.splice(c-d-1,c-d),s(n)})),t(document).on("click",".form-review-product .image-viewer__icon-remove",(function(e){e.preventDefault();var a=t(e.currentTarget).closest(".image-viewer__item").data("id");i.splice(a,1);var n=t(".form-review-product input[type=file]")[0];s(n)})),t(document).on("click",".form-review-product button[type=submit]",(function(r){r.preventDefault(),r.stopPropagation();var o=t(r.currentTarget),i=t(this).closest("form");t.ajax({type:"POST",cache:!1,url:i.prop("action"),data:new FormData(i[0]),contentType:!1,processData:!1,beforeSend:function(){o.prop("disabled",!0)},success:function(e){e.error?a(e.message):(i.find("select").val(0),i.find("textarea").val(""),n(e.message),setTimeout((function(){window.location.reload()}),1500))},error:function(t){e(t)},complete:function(){o.prop("disabled",!1)}})})),o.productQuantity=function(){o.$body.on("click",".quantity .increase, .quantity .decrease",(function(e){e.preventDefault();var a=t(this),n=a.siblings(".qty"),r=parseInt(n.attr("step"),10),i=parseInt(n.val(),10),s=parseInt(n.attr("min"),10),c=parseInt(n.attr("max"),10);s=s||1,c=c||i+1,a.hasClass("decrease")&&i>s&&(n.val(i-r),n.trigger("change")),a.hasClass("increase")&&i<c&&(n.val(i+r),n.trigger("change")),o.processUpdateCart(a)})),o.$body.on("keyup",".quantity .qty",(function(e){e.preventDefault();var a=t(this),n=a.closest(".product-button").find(".quantity_button"),r=a.closest(".quantity").siblings(".box-price").find(".price-current"),i=r.data("current"),s=parseInt(a.val(),10),c=parseInt(a.attr("min"),10),d=parseInt(a.attr("max"),10);if(s<=(d||s+1)&&s>=(c||1)){n.attr("data-quantity",s);var l=(i*s).toFixed(2);r.html(l)}o.processUpdateCart(a)}))},o.processUpdateCart=function(r){var i=t(".cart-page-content").find(".form--shopping-cart");if(!i.length)return!1;t.ajax({type:"POST",cache:!1,url:i.prop("action"),data:new FormData(i[0]),contentType:!1,processData:!1,beforeSend:function(){t("#loading").show()},success:function(e){if(e.error)return a(e.message),!1;t(".cart-page-content").load(window.siteConfig.cartUrl+" .cart-page-content > *"),o.loadAjaxCart(),n(e.message)},error:function(t){r.closest(".ps-table--shopping-cart").removeClass("content-loading"),e(t)},complete:function(){t("#loading").hide()}})},o.removeCartItem=function(){t(document).on("click",".remove-cart-item",(function(a){a.preventDefault();var i=t(this),s=i.closest(".sb-cart-item");t.ajax({url:i.data("url"),method:"GET",beforeSend:function(){r.show(),s.fadeOut(1e3)},success:function(e){var a;if(e.error)return n(e.message),!1;var r=t(".cart-page-content");r.length&&null!==(a=window.siteConfig)&&void 0!==a&&a.cartUrl&&r.load(window.siteConfig.cartUrl+" .cart-page-content > *",(function(){})),s.remove(),o.loadAjaxCart()},error:function(t){e(t),s.fadeIn()},complete:function(){r.hide()}})}))},o.loadAjaxCart=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==(e=window.siteConfig)&&void 0!==e&&e.ajaxCart&&t.ajax({url:window.siteConfig.ajaxCart,method:"GET",success:function(e){if(!e.error){var n=t(".sb-top-bar-frame").find(".sb-cart-number");t(".btn-shopping-cart .header-item-counter").text(e.data.count),t(".cart--mini .cart-price-total .cart-amount span").text(e.data.total_price),t(".menu--footer .icon-cart .cart-counter").text(e.data.count),n.text(e.data.count),t(".sb-minicart").html(e.data.html),n.addClass("sb-added"),a&&a.addClass("sb-added"),setTimeout((function(){n.removeClass("sb-added"),a&&a.removeClass("sb-added")}),600)}}})},o.applyCouponCode=function(){t(document).on("keypress",".form-coupon-wrapper .coupon-code",(function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),t(e.currentTarget).closest(".form-coupon-wrapper").find(".btn-apply-coupon-code").trigger("click"))})),t(document).on("click",".btn-apply-coupon-code",(function(o){o.preventDefault();var i=t(o.currentTarget);t.ajax({url:i.data("url"),type:"POST",data:{coupon_code:i.closest(".form-coupon-wrapper").find(".coupon-code").val()},beforeSend:function(){r.show()},success:function(e){e.error?a(e.message):t(".cart-page-content").load(window.location.href+"?applied_coupon=1 .cart-page-content > *",(function(){i.prop("disabled",!1).removeClass("loading"),n(e.message)}))},error:function(t){r.hide(),e(t)},complete:function(e){var t;r.hide(),200!==e.status||null==e||null===(t=e.responseJSON)||void 0===t||t.error}})})),t(document).on("click",".btn-remove-coupon-code",(function(a){a.preventDefault();var o=t(a.currentTarget),i=o.text();o.text(o.data("processing-text")),t.ajax({url:o.data("url"),type:"POST",beforeSend:function(){r.show()},success:function(e){e.error?n(e.message):t(".cart-page-content").load(window.location.href+" .cart-page-content > *",(function(){o.text(i)}))},error:function(t){r.hide(),e(t)},complete:function(e){var t;r.hide(),200===e.status&&!1===(null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.error)||o.text(i)}})}))}},o.filterSlider=function(){t(".nonlinear").each((function(e,a){var n=t(a),r=n.data("min"),i=n.data("max"),s=t(a).closest(".nonlinear-wrapper");noUiSlider.create(a,{connect:!0,behaviour:"tap",start:[s.find(".product-filter-item-price-0").val(),s.find(".product-filter-item-price-1").val()],range:{min:r,"10%":.1*i,"20%":.2*i,"30%":.3*i,"40%":.4*i,"50%":.5*i,"60%":.6*i,"70%":.7*i,"80%":.8*i,"90%":.9*i,max:i}});var c=[s.find(".slider__min"),s.find(".slider__max")];a.noUiSlider.on("update",(function(e,t){c[t].html(o.numberFormat(e[t]))})),a.noUiSlider.on("change",(function(e,t){s.find(".product-filter-item-price-"+t).val(Math.round(e[t])).trigger("change")}))}))},o.numberFormat=function(e,t,a,n){var r=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,i=void 0===n?",":n,s=void 0===a?".":a,c=(o?function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}(r,o):Math.round(r)).toString().split(".");return c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(c[1]||"").length<o&&(c[1]=c[1]||"",c[1]+=new Array(o-c[1].length+1).join("0")),c.join(s)},o.$body.on("click",".sidebar-filter-mobile",(function(e){e.preventDefault(),o.toggleSidebarFilterProducts("open",t(e.currentTarget).data("toggle"))})),o.$body.on("click",".catalog-sidebar .backdrop, #cart-mobile .backdrop",(function(e){e.preventDefault(),t(this).parent().removeClass("active")})),t(document).on("click",".close-toggle--sidebar",(function(e){var a;e.preventDefault(),t(this).data("toggle-closest")&&(a=t(this).closest(t(this).data("toggle-closest"))),a&&a.length||(a=t(this).closest(".panel--sidebar")),a.removeClass("active")})),o.toggleSidebarFilterProducts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"close",a=t('[data-toggle-target="'+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"product-categories-primary-sidebar")+'"]');"close"===e?a.removeClass("active"):a.addClass("active")},o.$body.on("click",".catalog-toolbar__ordering .dropdown .dropdown-menu a",(function(e){e.preventDefault();var a=t(e.currentTarget),n=a.closest(".dropdown");n.find("li").removeClass("active"),a.closest("li").addClass("active"),n.find("button[data-bs-toggle=dropdown").html(a.html()),a.closest(".catalog-toolbar__ordering").find("input[name=sort-by]").val(a.data("value")).trigger("change")})),t(".catalog-toolbar__ordering input[name=sort-by]").on("change",(function(e){o.$formSearch.find("input[name=sort-by]").val(t(e.currentTarget).val()),o.$formSearch.trigger("submit")})),o.convertFromDataToArray=function(e){var t=[];return e.forEach((function(e){if(e.value){if(["min_price","max_price"].includes(e.name))if(o.$formSearch.find("input[name="+e.name+"]").data(e.name.substring(0,3))===parseInt(e.value))return;t.push(e)}})),t},o.productsFilter=function(){function e(t){t.length&&(t.addClass("opened"),t.closest("ul").closest("li.category-filter").length&&e(t.closest("ul").closest("li.category-filter")))}o.widgetProductCategories=".widget-product-categories",o.$widgetProductCategories=t(o.widgetProductCategories),t(document).on("change","#products-filter-form .product-filter-item",(function(){i&&t(this).closest("form").trigger("submit")})),t(".widget-product-categories").find("li a.active").map((function(a,n){var r=t(n).closest("li.category-filter").closest("ul").closest("li.category-filter");r.length&&e(r)})),t(".catalog-toolbar__ordering input[name=sort-by]").on("change",(function(e){o.$formSearch.find("input[name=sort-by]").val(t(e.currentTarget).val()),o.$formSearch.trigger("submit")})),o.$body.on("click",".toggle-menu",(function(e){e.preventDefault(),t(this).closest("li").toggleClass("opened")})),t(document).on("click",o.widgetProductCategories+" li a",(function(e){e.preventDefault();var a=t(e.currentTarget),n=a.hasClass("active"),r=a.closest(o.widgetProductCategories);r.find("li a").removeClass("active"),a.addClass("active");var i=r.find("input[name='categories[]']");if(i.length)n?(a.removeClass("active"),i.val("")):i.val(a.data("id")),i.trigger("change");else{var s=a.attr("href");o.$formSearch.attr("action",s).trigger("submit")}})),t(document).on("submit","#products-filter-form",(function(e){e.preventDefault();var a=t(e.currentTarget),n=a.serializeArray(),r=o.convertFromDataToArray(n),i=[],s=o.$productListing.find("input[name=page]");s.val()&&r.push({name:"page",value:s.val()}),r.map((function(e){i.push(encodeURIComponent(e.name)+"="+e.value)}));var c=a.attr("action")+(i&&i.length?"?"+i.join("&"):"");r.push({name:"_",value:+new Date}),t.ajax({url:a.attr("action"),type:"GET",data:r,beforeSend:function(){o.$productListing.find(".loading").show(),t("html, body").animate({scrollTop:o.$productListing.offset().top-200},500);var e=o.$formSearch.find(".nonlinear");e.length&&e[0].noUiSlider.set([o.$formSearch.find("input[name=min_price]").val(),o.$formSearch.find("input[name=max_price]").val()]),o.toggleSidebarFilterProducts()},success:function(e){if(!1===e.error){var a,n;o.$productListing.html(e.data);var i,s=e.message,d=t(".products-found");if(s&&d.length&&d.html('<span class="text-primary me-1">'+s.substr(0,s.indexOf(" "))+"</span>"+s.substr(s.indexOf(" ")+1)),t(".products-listing .sb-menu-item").length?t(".catalog-toolbar__ordering").addClass("d-flex").removeClass("d-none"):t(".catalog-toolbar__ordering").addClass("d-none").removeClass("d-flex"),t(".product-found-text").text(e.message),null!==(a=e.additional)&&void 0!==a&&a.category_tree)t(".widget-product-categories .widget-layered-nav-list").html(null===(i=e.additional)||void 0===i?void 0:i.category_tree);null!==(n=e.additional)&&void 0!==n&&n.breadcrumb&&t(".page-breadcrumbs div").html(e.additional.breadcrumb),c!==window.location.href&&window.history.pushState(r,e.message,c)}else o.showError(e.message||"Opp!")},error:function(e){o.handleError(e)},complete:function(){o.$productListing.find(".loading").hide()}})})),t(document).on("click",o.productListing+" .sb-pagination a",(function(e){e.preventDefault();var a=new URL(t(e.currentTarget).attr("href")).searchParams.get("page");o.$productListing.find("input[name=page]").val(a),o.$formSearch.trigger("submit")}))},o.changeInputInSearchForm=function(e){i=!1,o.$formSearch.find("input, select, textarea").each((function(a,n){var r=t(n),o=r.attr("name"),i=e[o]||null;if("checkbox"===r.attr("type"))r.prop("checked",!1),Array.isArray(i)?r.prop("checked",i.includes(r.val())):r.prop("checked",!!i);else r.is("[name=max_price]")?r.val(i||r.data("max")):r.is("[name=min_price]")?r.val(i||r.data("min")):r.val()!==i&&r.val(i)})),i=!0},o.parseParamsSearch=function(e){for(var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||window.location.search.substring(1),r=/([^&=]+)=?([^&]*)/g,o=/\+/g,i=function(e){return decodeURIComponent(e.replace(o," "))},s={};t=r.exec(n);){var c=i(t[1]),d=i(t[2]);"[]"===c.substring(c.length-2)?(a&&(c=c.substring(0,c.length-2)),(s[c]||(s[c]=[])).push(d)):s[c]=d}return s},o.removeWishlistItem=function(){t(document).on("click",".remove-wishlist-item",(function(o){o.preventDefault();var i=t(this);t.ajax({url:i.data("url"),method:"POST",data:{_method:"DELETE"},beforeSend:function(){r.show()},success:function(e){e.error?a(e.message):(n(e.message),0===e.data.count?(t(".sb-btn-wishlist").load(window.siteUrl+" .sb-btn-wishlist > *",(function(){})),t(".wishlist-page-content").load(window.siteConfig.wishlistUrl+" .wishlist-page-content > *",(function(){}))):t(".sb-top-bar-frame").find(".sb-wishlist-number").text(e.data.count))},error:function(t){e(t)},complete:function(){r.hide()}})}))}}(jQuery),o.init()})();